from bs4 import BeautifulSoup
import requests
import json

outFile = open('GW10top1kPercentageOwned.txt', 'a', encoding='utf8')

# playerOccurrences = {454: 505, 247: 577, 115: 790, 357: 429, 393: 625, 122: 992, 233: 586, 13: 18, 43: 456, 280: 826, 22: 264, 498: 33, 427: 306, 145: 853, 105: 62, 260: 274,
# 425: 612, 40: 424, 253: 374, 234: 98, 437: 154, 190: 306, 102: 4, 20: 2, 267: 268, 370: 109, 432: 5, 453: 4, 45: 71, 480: 459, 136: 44, 245: 348, 270: 161, 142: 13, 155: 51, 182: 18, 80: 20, 400: 110, 458: 26, 106: 10, 468: 56, 275: 14, 372: 129, 179: 41, 56: 54, 32: 4, 423: 24, 276: 54, 445: 105, 251: 280, 380: 3, 258: 114, 135: 159, 202: 79, 273: 16, 433: 86, 378: 32, 257: 48, 76: 36, 413: 14, 473: 5, 47: 60, 55: 53, 138: 16, 392: 50, 435: 4, 478: 55, 23: 20, 125: 15, 164: 27, 89: 2, 286: 31, 417: 160, 518: 1, 113: 7, 396: 11, 14: 33, 312: 4, 262: 4, 242: 7, 25: 28, 189: 65, 271: 70, 490: 93, 31: 5, 483: 44, 462: 6, 140: 13, 340: 195, 439: 11, 95: 55, 268: 56, 116: 21, 459: 17, 183: 5, 215: 1, 310: 24, 16: 8, 24: 43, 15: 2, 265: 72, 131: 30, 62: 24, 410: 30, 83:
# 11, 484: 7, 494: 1, 4: 41, 499: 2, 351: 8, 27: 21, 172: 69, 5: 29, 524: 12, 504: 8, 178: 9, 221: 79, 338: 1, 49: 31, 332: 11, 151: 37, 456: 2, 88: 7, 29: 4, 302: 11, 52: 8, 327: 9, 154: 10, 451: 19, 391: 20, 220: 14, 328: 26, 500: 5, 147: 2, 167: 13, 464: 2, 335: 26, 527: 4, 236: 6, 213: 9, 254: 7, 387: 7, 57: 6, 347: 3, 405: 3, 26: 1, 522: 7, 309: 1, 475: 7, 318: 2, 94: 2, 537: 2, 330: 4, 513: 2, 447: 4, 42: 23, 246: 8, 367: 16, 109: 3, 126: 19, 28: 5, 339: 3, 219: 19, 48: 4, 124: 5, 199: 1, 84: 2, 93: 3, 282: 1, 98: 2, 252: 3, 530: 1, 323: 1, 208: 4, 355: 1, 133: 4, 303: 7, 465: 4, 277: 1, 509: 1, 507: 3, 472:
# 2, 209: 12, 226: 3, 395: 3, 193: 1, 53: 4, 274: 6, 352: 1, 91: 1, 177: 2, 38: 1, 58: 2, 162: 3, 313: 2, 96: 3, 422: 2, 7: 1, 72: 11, 146: 4, 186: 1, 363: 1, 225: 1, 272: 1, 365: 1, 450: 1, 430: 1, 218: 3, 298: 2, 291: 1, 175: 1, 174: 1, 306: 2, 191: 1, 141: 4, 409: 2, 516: 1, 143: 1, 353: 2, 168: 1, 2: 1, 153: 1, 18: 1, 17: 1, 34: 2, 428: 1, 70: 1, 127: 1, 364: 1, 239: 1, 344: 1, 383: 1}

playerOccurrences = {260: 302, 115: 834, 376: 6, 425: 536, 145: 820, 253: 736, 40: 600, 391: 125, 437: 137, 280: 795, 234: 44, 190: 337, 247: 762, 122: 901, 102: 7, 400: 129,
267: 513, 233: 492, 458: 36, 43: 688, 480: 500, 106: 19, 24: 58, 27: 27, 475: 4, 389: 15, 301: 44, 251: 339, 154: 20, 258: 133, 378: 52, 47: 162, 357: 228, 427: 312, 393: 531, 191: 6, 221: 45, 340: 177, 468: 68, 343: 1, 127: 16, 417: 198, 22: 137, 522: 4, 445: 149, 380: 2, 423: 22, 454: 321, 202: 80, 312: 7,
483: 33, 167: 3, 49: 69, 504: 18, 245: 188, 490: 62, 262: 3, 189: 80, 25: 31, 242: 20, 413: 11, 459: 10, 328: 20, 433: 56, 498: 26, 13: 23, 105: 39, 57: 18, 135: 94, 478: 56, 435: 2, 23: 61, 84: 4, 151: 28, 155: 53, 93: 3, 113: 5, 409: 2, 31: 4, 462: 5, 140: 8, 351: 3, 500: 3, 271: 46, 396: 9, 56: 80, 387: 4, 208: 4, 172: 37, 146: 8, 76: 9, 55: 28, 524: 18, 179: 62, 164: 16, 80: 20, 4: 36, 136: 56, 286: 12, 451: 18, 268: 61, 390: 3, 29: 7, 45: 42, 209: 19, 270: 25, 116: 32, 537: 2, 410: 37, 62: 28, 95: 38, 456: 2, 131: 23, 527: 6, 239: 24, 126: 17, 310: 28, 383: 6, 302: 8, 219: 16, 276: 23, 494: 2, 392: 38, 370:
25, 125: 6, 516: 1, 16: 3, 465: 8, 432: 2, 142: 7, 347: 3, 275: 8, 405: 7, 332: 15, 327: 5, 48: 14, 257: 32, 254: 5, 118: 13, 335: 22, 26: 2, 539: 2, 518:
1, 5: 9, 178: 9, 42: 26, 15: 2, 52: 7, 88: 3, 192: 5, 223: 3, 330: 9, 220: 16, 246: 20, 96: 5, 339: 9, 372: 21, 32: 3, 162: 2, 533: 3, 273: 7, 265: 26, 183: 5, 72: 2, 484: 5, 138: 8, 53: 4, 215: 1, 236: 6, 83: 2, 309: 3, 439: 10, 213: 6, 318: 1, 94: 2, 313: 4, 513: 2, 17: 2, 124: 13, 218: 3, 282: 3, 395: 3, 226: 4, 394: 4, 473: 3, 509: 1, 182: 10, 464: 4, 303: 3, 193: 3, 14: 2, 109: 4, 272: 6, 447: 1, 206: 1, 74: 1, 20: 1, 175: 1, 472: 1, 297: 1, 75: 1, 133: 1, 147: 3, 58: 1, 441: 1, 98: 1, 284: 1, 195: 2, 141: 1, 361: 2, 205: 1, 225: 1, 149: 2, 6: 1, 196: 1, 28: 1, 50: 1, 382: 1, 199: 1, 367: 1, 450: 1, 426: 1,
363: 2, 2: 1}
url = 'https://fantasy.premierleague.com/drf/bootstrap-static'    

playerIdToName = {}

source = requests.get(url).text
soup = BeautifulSoup(source,'lxml') 
jsonText = soup.find('p').getText()
    
data = json.loads(jsonText)
data = data['elements']

for playerInfo in data:
    playerIdToName[playerInfo['id']] = playerInfo['web_name']

ownership = []
for key, value in playerOccurrences.items():
    ownership.append((playerIdToName[key], value/10))

ownership.sort(reverse=True, key=lambda tup: tup[1])
for o in ownership:
    print(o, file=outFile)